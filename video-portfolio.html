<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WXZ STUDIO - 视频作品</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header class="header">
        <div class="nav-content container">
            <div class="logo"><a href="index.html">WXZ STUDIO</a></div>
            <nav class="nav-menu">
                <ul>
                    <li><a href="index.html">首页</a></li>
                    <li><a href="video-portfolio.html" class="active">视频作品</a></li>
                    <li><a href="graphic-portfolio.html">平面设计</a></li>
                    <li><a href="contact.html">联系方式</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="main-content" style="margin-bottom: 0; margin-top: 0;">
        <section class="footage-section">
            
            <div class="footage-scroll-wrapper" id="footageScrollWrapper">
                
                <div class="footage-item" data-video-src="assets/videos/portfolio/video-01.mp4">
                    <img src="assets/videos/portfolio/video-01-cover.jpg" alt="2024年度混剪 封面">
                    <div class="footage-info">
                        <h3>2024年度混剪</h3>
                        <p>品牌宣传 / 产品拍摄</p>
                    </div>
                </div>

                <div class="footage-item" data-video-src="assets/videos/portfolio/video-02.mp4">
                    <img src="assets/videos/portfolio/video-02-cover.jpg" alt="首尔时装周 封面">
                    <div class="footage-info">
                        <h3>首尔时装周</h3>
                        <p>商业活动 / 品牌宣传</p>
                    </div>
                </div>

                <div class="footage-item" data-video-src="assets/videos/portfolio/video-03.mp4">
                    <img src="assets/videos/portfolio/video-03-cover.jpg" alt="高端晚宴 封面">
                    <div class="footage-info">
                        <h3>高端晚宴</h3>
                        <p>商业活动</p>
                    </div>
                </div>

                <div class="footage-item" data-video-src="assets/videos/portfolio/video-04.mp4">
                    <img src="assets/videos/portfolio/video-04-cover.jpg" alt="新世界免税店 封面">
                    <div class="footage-info">
                        <h3>新世界免税店 x 首尔月</h3>
                        <p>产品拍摄 / 品牌宣传</p>
                    </div>
                </div>
                
            </div>
            
            <div class="footage-progress-bar-container">
                <div id="footageProgressBar"></div>
            </div>

        </section>
        
    </main>
    
    <div id="videoModal" class="video-modal">
        <div class="modal-content">
            <span class="close-btn" id="closeVideoModal">&times;</span>
            <div id="videoPlayerContainer"></div>
        </div>
    </div>
    
    <nav class="mobile-nav">
        <div class="mobile-menu-icons">
            <a href="index.html">
                <img src="assets/images/icons/home.png" class="icon-default" alt="首页">
                <img src="assets/images/icons/home-active.png" class="icon-active" alt="首页 Active">
                <span>首页</span>
            </a>
            <a href="video-portfolio.html" class="active">
                <img src="assets/images/icons/video.png" class="icon-default" alt="视频作品">
                <img src="assets/images/icons/video-active.png" class="icon-active" alt="视频作品 Active">
                <span>视频作品</span>
            </a>
            <a href="graphic-portfolio.html">
                <img src="assets/images/icons/graphic.png" class="icon-default" alt="平面设计">
                <img src="assets/images/icons/graphic-active.png" class="icon-active" alt="平面设计 Active">
                <span>平面设计</span>
            </a>
            <a href="contact.html">
                <img src="assets/images/icons/contact.png" class="icon-default" alt="联系方式">
                <img src="assets/images/icons/contact-active.png" class="icon-active" alt="联系方式 Active">
                <span>联系方式</span>
            </a>
        </div>
    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('videoModal');
            const closeBtn = document.getElementById('closeVideoModal');
            const playerContainer = document.getElementById('videoPlayerContainer');
            const scrollWrapper = document.getElementById('footageScrollWrapper');
            const progressBar = document.getElementById('footageProgressBar');

            // 1. 模态框播放逻辑
            function closeModal() {
                modal.classList.remove('show');
                playerContainer.innerHTML = ''; // 清除播放器内容
                document.body.style.overflow = ''; // 恢复背景滚动
            }
            
            document.querySelectorAll('.footage-item').forEach(item => {
                item.addEventListener('click', function() {
                    const videoSrc = this.getAttribute('data-video-src');
                    // 页面内播放
                    playerContainer.innerHTML = `
                        <video id="fullPageVideoPlayer" src="${videoSrc}" controls autoplay playsinline loop></video>
                    `;
                    modal.classList.add('show');
                    document.body.style.overflow = 'hidden'; // 阻止背景滚动
                });
            });

            closeBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('show')) {
                    closeModal();
                }
            });
            
            // 2. 进度条逻辑
            function updateProgressBar() {
                if (!scrollWrapper || !progressBar) return;

                const scrollWidth = scrollWrapper.scrollWidth - scrollWrapper.clientWidth;
                if (scrollWidth > 0) {
                    const scrollPosition = scrollWrapper.scrollLeft;
                    const progress = (scrollPosition / scrollWidth) * 100;
                    progressBar.style.width = `${progress}%`;
                }
            }

            scrollWrapper.addEventListener('scroll', updateProgressBar);
            updateProgressBar(); 
        });
    </script>
</body>
</html>