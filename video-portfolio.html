<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WXZ STUDIO - 视频作品</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header class="header">
        <div class="nav-content container">
            <div class="logo"><a href="index.html">WXZ STUDIO</a></div>
            <nav class="nav-menu">
                <ul>
                    <li><a href="index.html">首页</a></li>
                    <li><a href="video-portfolio.html" class="active">视频作品</a></li>
                    <li><a href="graphic-portfolio.html">平面设计作品</a></li>
                    <li><a href="contact.html">联系方式</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="main-content">
        <section class="portfolio-section">
            <div class="container">
                <h2>视频作品集</h2>
                <div class="tags-filter">
                    <span class="work-tag active" data-filter="all">全部</span>
                    <span class="work-tag" data-filter="event">商业活动</span>
                    <span class="work-tag" data-filter="product">产品拍摄</span>
                    <span class="work-tag" data-filter="brand">品牌宣传</span>
                </div>
                
                <div class="portfolio-grid video-portfolio-grid">
                    
                    <a class="work-item" data-tags="event,brand" data-video-src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1" target="_blank">
                        <div class="work-media">
                            <img src="assets/images/video_thumbs/thumb01.jpg" alt="作品封面1">
                        </div>
                        <div class="work-info">
                            <h3>某集团年会宣传片</h3>
                            <div class="work-tags">
                                <span class="work-tag">商业活动</span>
                                <span class="work-tag">品牌宣传</span>
                            </div>
                        </div>
                    </a>

                    <a class="work-item" data-tags="product" data-video-src="https://www.youtube.com/embed/tgbNymZ7vqY?autoplay=1" target="_blank">
                        <div class="work-media">
                            <img src="assets/images/video_thumbs/thumb02.jpg" alt="作品封面2">
                        </div>
                        <div class="work-info">
                            <h3>全新智能手机产品发布</h3>
                            <div class="work-tags">
                                <span class="work-tag">产品拍摄</span>
                            </div>
                        </div>
                    </a>

                    <a class="work-item" data-tags="brand" data-video-src="https://player.vimeo.com/video/22439234?autoplay=1" target="_blank">
                        <div class="work-media">
                            <img src="assets/images/video_thumbs/thumb03.jpg" alt="作品封面3">
                        </div>
                        <div class="work-info">
                            <h3>城市文化旅游宣传片</h3>
                            <div class="work-tags">
                                <span class="work-tag">品牌宣传</span>
                            </div>
                        </div>
                    </a>

                    <a class="work-item" data-tags="event,product" data-video-src="https://www.bilibili.com/video/BV1nx411G7W5?autoplay=1" target="_blank">
                        <div class="work-media">
                            <img src="assets/images/video_thumbs/thumb04.jpg" alt="作品封面4">
                        </div>
                        <div class="work-info">
                            <h3>户外装备极限测试</h3>
                            <div class="work-tags">
                                <span class="work-tag">商业活动</span>
                                <span class="work-tag">产品拍摄</span>
                            </div>
                        </div>
                    </a>

                    <a class="work-item" data-tags="brand" data-video-src="https://v.qq.com/iframe/player.html?vid=a0028tq2f4c&autoplay=1" target="_blank">
                        <div class="work-media">
                            <img src="assets/images/video_thumbs/thumb05.jpg" alt="作品封面5">
                        </div>
                        <div class="work-info">
                            <h3>企业人才招募形象片</h3>
                            <div class="work-tags">
                                <span class="work-tag">品牌宣传</span>
                            </div>
                        </div>
                    </a>
                    
                </div>
            </div>
        </section>
    </main>

    <div id="videoModal" class="video-modal">
        <div class="modal-content">
            <span class="close-btn" id="closeBtn">&times;</span> 
            <div id="videoPlayerContainer">
                </div>
        </div>
    </div>
    
    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 WXZ STUDIO. All Rights Reserved. </p>
        </div>
    </footer>

    <nav class="mobile-nav">
        <div class="mobile-menu-icons">
            <a href="index.html">
                <img src="assets/images/icons/home.png" class="icon-default" alt="首页">
                <img src="assets/images/icons/home-active.png" class="icon-active" alt="首页 Active">
                <span>首页</span>
            </a>
            <a href="video-portfolio.html" class="active">
                <img src="assets/images/icons/video.png" class="icon-default" alt="视频作品">
                <img src="assets/images/icons/video-active.png" class="icon-active" alt="视频作品 Active">
                <span>视频作品</span>
            </a>
            <a href="graphic-portfolio.html">
                <img src="assets/images/icons/graphic.png" class="icon-default" alt="平面设计">
                <img src="assets/images/icons/graphic-active.png" class="icon-active" alt="平面设计 Active">
                <span>平面设计</span>
            </a>
            <a href="contact.html">
                <img src="assets/images/icons/contact.png" class="icon-default" alt="联系方式">
                <img src="assets/images/icons/contact-active.png" class="icon-active" alt="联系方式 Active">
                <span>联系方式</span>
            </a>
        </div>
    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('videoModal');
            const closeBtn = document.getElementById('closeBtn');
            const videoContainer = document.getElementById('videoPlayerContainer');
            const workItems = document.querySelectorAll('.work-item');

            // 【重要修复】关闭模态框和移除播放器的函数
            function closeModal() {
                modal.classList.remove('show');
                // 移除所有子元素，停止视频播放
                while (videoContainer.firstChild) {
                    videoContainer.removeChild(videoContainer.firstChild);
                }
                // 恢复页面滚动（如果需要）
                document.body.style.overflow = 'auto'; 
                // 确保移动端底部导航显示 (如果它因为全屏被隐藏了)
                document.querySelector('.mobile-nav').style.display = 'flex'; 
            }

            // 1. 模态框播放逻辑
            workItems.forEach(item => {
                // 确保点击事件只在桌面端或模态框功能可用时触发
                item.addEventListener('click', function(e) {
                    // 阻止默认的链接跳转行为 (target="_blank")
                    e.preventDefault(); 
                    
                    const videoSrc = this.getAttribute('data-video-src');
                    if (!videoSrc) return;

                    // 移动端：直接跳转到外部链接（或原生App处理），避免在小屏幕内嵌播放体验差
                    if (window.innerWidth <= 1024) {
                        // 尝试使用通用链接打开新标签页，或者使用 callNative
                        window.open(this.href, '_blank');
                        return; 
                    }


                    // 桌面端：在模态框内播放
                    
                    // 创建 iframe 播放器
                    const iframe = document.createElement('iframe');
                    iframe.setAttribute('src', videoSrc);
                    iframe.setAttribute('frameborder', '0');
                    iframe.setAttribute('allow', 'autoplay; fullscreen; picture-in-picture');
                    iframe.setAttribute('allowfullscreen', '');
                    iframe.classList.add('modal-video-player');
                    
                    // 清空并添加新播放器
                    while (videoContainer.firstChild) {
                        videoContainer.removeChild(videoContainer.firstChild);
                    }
                    videoContainer.appendChild(iframe);

                    modal.classList.add('show');
                    // 禁用页面滚动
                    document.body.style.overflow = 'hidden';
                });
            });

            // 桌面端关闭事件绑定
            closeBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                // 点击背景关闭 (桌面端)
                if (e.target === modal) {
                    closeModal();
                }
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('show')) {
                    closeModal();
                }
            });


            // 2. 筛选功能 (保持不变)
            document.querySelectorAll('.tags-filter .work-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    document.querySelectorAll('.tags-filter .work-tag').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    const items = document.querySelectorAll('.portfolio-grid .work-item');

                    items.forEach(item => {
                        const tags = item.getAttribute('data-tags');
                        if (filter === 'all' || tags.includes(filter)) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            });
        });
    </script>
</body>
</html>