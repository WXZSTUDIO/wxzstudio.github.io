<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title id="pageTitle" data-lang-zh="WXZ STUDIO - 视频作品" data-lang-en="WXZ STUDIO - Video Portfolio" data-lang-kr="WXZ STUDIO - 영상 포트폴리오" data-lang-tw="WXZ STUDIO - 視頻作品">WXZ STUDIO - 视频作品</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body data-current-lang="zh">
    <header class="header">
        <div class="nav-content container">
            <div class="logo"><a href="index.html">WXZ STUDIO</a></div>

            <nav class="nav-menu">
                <ul>
                    <li><a href="index.html" data-lang-key="nav_home">首页</a></li>
                    <li><a href="video-portfolio.html" class="active" data-lang-key="nav_video">视频作品</a></li>
                    <li><a href="graphic-portfolio.html" data-lang-key="nav_graphic">平面设计作品</a></li>
                    <li><a href="contact.html" data-lang-key="nav_contact">联系方式</a></li>
                </ul>
            </nav>

            <div class="desktop-lang-switcher">
                <span class="lang-option" data-lang="en">EN</span>
                <span class="lang-option" data-lang="kr">KR</span>
                <span class="lang-option" data-lang="zh">简</span>
                <span class="lang-option" data-lang="tw">繁</span>
            </div>

            <div class="mobile-lang-container">
                <button class="mobile-lang-btn" id="mobileLangBtn" data-current-display="简">简</button>
                <div class="mobile-lang-dropdown" id="mobileLangDropdown">
                    <button data-lang="en">English (EN)</button>
                    <button data-lang="kr">한국어 (KR)</button>
                    <button data-lang="zh">简体中文 (简)</button>
                    <button data-lang="tw">繁體中文 (繁)</button>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <section class="portfolio-section">
            <div class="container">
                <h2 data-lang-key="video_title">视频作品集</h2>
                <div class="tags-filter">
                    <span class="work-tag active" data-filter="all" data-lang-key="filter_all">全部</span>
                    <span class="work-tag" data-filter="event" data-lang-key="filter_event">商业活动</span>
                    <span class="work-tag" data-filter="product" data-lang-key="filter_product">产品拍摄</span>
                    <span class="work-tag" data-filter="brand" data-lang-key="filter_brand">品牌宣传</span>
                </div>
                
                <div class="portfolio-grid video-portfolio-grid">
                    
                    <a class="work-item" data-tags="event,brand" data-video-src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1" target="_blank">
                        <div class="work-media">
                            <img src="assets/images/video_thumbs/thumb01.jpg" alt="作品封面1">
                        </div>
                        <div class="work-info">
                            <h3 data-lang-key="video01_h">某集团年会宣传片</h3>
                            <div class="work-tags">
                                <span class="work-tag" data-lang-key="filter_event_tag">商业活动</span>
                                <span class="work-tag" data-lang-key="filter_brand_tag">品牌宣传</span>
                            </div>
                        </div>
                    </a>

                    <a class="work-item" data-tags="product" data-video-src="https://www.youtube.com/embed/tgbNymZ7vqY?autoplay=1" target="_blank">
                        <div class="work-media">
                            <img src="assets/images/video_thumbs/thumb02.jpg" alt="作品封面2">
                        </div>
                        <div class="work-info">
                            <h3 data-lang-key="video02_h">全新智能手机产品发布</h3>
                            <div class="work-tags">
                                <span class="work-tag" data-lang-key="filter_product_tag">产品拍摄</span>
                            </div>
                        </div>
                    </a>

                    <a class="work-item" data-tags="brand" data-video-src="https://player.vimeo.com/video/22439234?autoplay=1" target="_blank">
                        <div class="work-media">
                            <img src="assets/images/video_thumbs/thumb03.jpg" alt="作品封面3">
                        </div>
                        <div class="work-info">
                            <h3 data-lang-key="video03_h">城市文化旅游宣传片</h3>
                            <div class="work-tags">
                                <span class="work-tag" data-lang-key="filter_brand_tag">品牌宣传</span>
                            </div>
                        </div>
                    </a>

                    <a class="work-item" data-tags="event,product" data-video-src="https://www.bilibili.com/video/BV1nx411G7W5?autoplay=1" target="_blank">
                        <div class="work-media">
                            <img src="assets/images/video_thumbs/thumb04.jpg" alt="作品封面4">
                        </div>
                        <div class="work-info">
                            <h3 data-lang-key="video04_h">户外装备极限测试</h3>
                            <div class="work-tags">
                                <span class="work-tag" data-lang-key="filter_event_tag">商业活动</span>
                                <span class="work-tag" data-lang-key="filter_product_tag">产品拍摄</span>
                            </div>
                        </div>
                    </a>

                    <a class="work-item" data-tags="brand" data-video-src="https://v.qq.com/iframe/player.html?vid=a0028tq2f4c&autoplay=1" target="_blank">
                        <div class="work-media">
                            <img src="assets/images/video_thumbs/thumb05.jpg" alt="作品封面5">
                        </div>
                        <div class="work-info">
                            <h3 data-lang-key="video05_h">企业人才招募形象片</h3>
                            <div class="work-tags">
                                <span class="work-tag" data-lang-key="filter_brand_tag">品牌宣传</span>
                            </div>
                        </div>
                    </a>
                    
                </div>
            </div>
        </section>
    </main>

    <div id="videoModal" class="video-modal">
        <div class="modal-content">
            <span class="close-btn" id="closeBtn">&times;</span> 
            <div id="videoPlayerContainer">
                </div>
        </div>
    </div>
    
    <footer class="footer footer-extra-padding">
        <div class="footer-lang-switcher">
            <span class="lang-option" data-lang="en">EN</span>
            <span class="lang-option" data-lang="kr">KR</span>
            <span class="lang-option" data-lang="zh">简</span>
            <span class="lang-option" data-lang="tw">繁</span>
        </div>
        <div class="container">
            <p>&copy; 2026 WXZ STUDIO. All Rights Reserved. </p>
        </div>
    </footer>

    <nav class="mobile-nav">
        <div class="mobile-menu-icons">
            <a href="index.html">
                <img src="assets/images/icons/home.png" class="icon-default" alt="首页">
                <img src="assets/images/icons/home-active.png" class="icon-active" alt="首页 Active">
                <span data-lang-key="nav_home">首页</span>
            </a>
            <a href="video-portfolio.html" class="active">
                <img src="assets/images/icons/video.png" class="icon-default" alt="视频作品">
                <img src="assets/images/icons/video-active.png" class="icon-active" alt="视频作品 Active">
                <span data-lang-key="nav_video">视频作品</span>
            </a>
            <a href="graphic-portfolio.html">
                <img src="assets/images/icons/graphic.png" class="icon-default" alt="平面设计">
                <img src="assets/images/icons/graphic-active.png" class="icon-active" alt="平面设计 Active">
                <span data-lang-key="nav_graphic">平面设计</span>
            </a>
            <a href="contact.html">
                <img src="assets/images/icons/contact.png" class="icon-default" alt="联系方式">
                <img src="assets/images/icons/contact-active.png" class="icon-active" alt="联系方式 Active">
                <span data-lang-key="nav_contact">联系方式</span>
            </a>
        </div>
    </nav>

    <script>
        // -------------------------
        // 1. 语言切换字典
        // -------------------------
        const translations = {
            zh: {
                pageTitle: 'WXZ STUDIO - 视频作品',
                nav_home: '首页', nav_video: '视频作品', nav_graphic: '平面设计作品', nav_contact: '联系方式',
                video_title: '视频作品集',
                filter_all: '全部', filter_event: '商业活动', filter_product: '产品拍摄', filter_brand: '品牌宣传',
                filter_event_tag: '商业活动', filter_product_tag: '产品拍摄', filter_brand_tag: '品牌宣传',
                video01_h: '某集团年会宣传片', video02_h: '全新智能手机产品发布', video03_h: '城市文化旅游宣传片',
                video04_h: '户外装备极限测试', video05_h: '企业人才招募形象片',
            },
            en: {
                pageTitle: 'WXZ STUDIO - Video Portfolio',
                nav_home: 'Home', nav_video: 'Video Portfolio', nav_graphic: 'Graphic Design', nav_contact: 'Contact',
                video_title: 'VIDEO PORTFOLIO',
                filter_all: 'All', filter_event: 'Event', filter_product: 'Product', filter_brand: 'Brand',
                filter_event_tag: 'Event', filter_product_tag: 'Product', filter_brand_tag: 'Brand',
                video01_h: 'Corporate Annual Meeting Promo', video02_h: 'New Smartphone Product Launch', video03_h: 'City Tourism Promotion Video',
                video04_h: 'Outdoor Gear Extreme Test', video05_h: 'Corporate Talent Recruitment Film',
            },
            kr: {
                pageTitle: 'WXZ STUDIO - 영상 포트폴리오',
                nav_home: '홈', nav_video: '영상 포트폴리오', nav_graphic: '그래픽 디자인', nav_contact: '연락처',
                video_title: '영상 포트폴리오',
                filter_all: '전체', filter_event: '행사', filter_product: '제품', filter_brand: '브랜드',
                filter_event_tag: '행사', filter_product_tag: '제품', filter_brand_tag: '브랜드',
                video01_h: '그룹 연례 회의 홍보 영상', video02_h: '새 스마트폰 제품 출시', video03_h: '도시 문화 관광 홍보 영상',
                video04_h: '아웃도어 장비 극한 테스트', video05_h: '기업 인재 모집 이미지 영상',
            },
            tw: {
                pageTitle: 'WXZ STUDIO - 視頻作品',
                nav_home: '首頁', nav_video: '視頻作品', nav_graphic: '平面設計作品', nav_contact: '聯絡方式',
                video_title: '視頻作品集',
                filter_all: '全部', filter_event: '商業活動', filter_product: '產品拍攝', filter_brand: '品牌宣傳',
                filter_event_tag: '商業活動', filter_product_tag: '產品拍攝', filter_brand_tag: '品牌宣傳',
                video01_h: '某集團年會宣傳片', video02_h: '全新智能手機產品發佈', video03_h: '城市文化旅遊宣傳片',
                video04_h: '戶外裝備極限測試', video05_h: '企業人才招募形象片',
            }
        };

        // -------------------------
        // 2. 语言切换核心函数 (通用)
        // -------------------------
        
        const langDisplayNames = { 'en': 'EN', 'kr': 'KR', 'zh': '简', 'tw': '繁' };
        
        function getPreferredLang() {
            const navLang = navigator.language || navigator.userLanguage;
            if (navLang.startsWith('zh-TW') || navLang.startsWith('zh-HK') || navLang.startsWith('zh-MO')) return 'tw';
            if (navLang.startsWith('zh')) return 'zh';
            if (navLang.startsWith('ko')) return 'kr';
            if (navLang.startsWith('en')) return 'en';
            return 'zh';
        }

        function switchLanguage(langCode) {
            const targetLang = translations[langCode] || translations['zh'];
            
            document.body.setAttribute('data-current-lang', langCode);

            const pageTitleEl = document.getElementById('pageTitle');
            if (pageTitleEl) {
                const customTitle = pageTitleEl.getAttribute(`data-lang-${langCode}`);
                pageTitleEl.textContent = customTitle || targetLang.pageTitle;
            }

            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                if (targetLang[key]) {
                    el.textContent = targetLang[key];
                }
            });

            document.querySelectorAll('.lang-option, .mobile-lang-dropdown button').forEach(el => {
                el.classList.remove('active-lang');
                if (el.getAttribute('data-lang') === langCode) {
                    el.classList.add('active-lang');
                }
            });

            const mobileBtn = document.getElementById('mobileLangBtn');
            if (mobileBtn) {
                mobileBtn.textContent = langDisplayNames[langCode];
                mobileBtn.setAttribute('data-current-display', langDisplayNames[langCode]);
            }
        
            document.getElementById('mobileLangDropdown').classList.remove('show');
            localStorage.setItem('wxz_lang', langCode);
            
            // 确保筛选器标签也更新
            document.querySelectorAll('.tags-filter .work-tag.active').forEach(tag => {
                const filter = tag.getAttribute('data-filter');
                if (filter !== 'all') {
                    // 重新触发筛选以更新标签文本
                    tag.click();
                } else {
                    // 单独处理“全部”的文本更新
                    tag.textContent = targetLang.filter_all;
                }
            });
        }

        // -------------------------
        // 3. 视频作品页面的 JS 逻辑
        // -------------------------
        document.addEventListener('DOMContentLoaded', () => {
            
            // 确定初始语言
            const storedLang = localStorage.getItem('wxz_lang');
            const initialLang = storedLang || getPreferredLang();
            switchLanguage(initialLang);

            // 语言切换事件绑定 (与首页相同)
            document.querySelectorAll('.lang-option').forEach(option => {
                option.addEventListener('click', function() {
                    switchLanguage(this.getAttribute('data-lang'));
                });
            });

            document.querySelectorAll('#mobileLangDropdown button').forEach(button => {
                button.addEventListener('click', function() {
                    switchLanguage(this.getAttribute('data-lang'));
                });
            });

            const mobileLangBtn = document.getElementById('mobileLangBtn');
            const mobileLangDropdown = document.getElementById('mobileLangDropdown');
            const mobileLangContainer = document.querySelector('.mobile-lang-container');

            if (mobileLangBtn) {
                mobileLangBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    mobileLangDropdown.classList.toggle('show');
                });
            }

            document.addEventListener('click', (e) => {
                if (mobileLangDropdown && !mobileLangContainer.contains(e.target)) {
                    mobileLangDropdown.classList.remove('show');
                }
            });

            // 视频播放模态框逻辑
            const modal = document.getElementById('videoModal');
            const closeBtn = document.getElementById('closeBtn');
            const videoContainer = document.getElementById('videoPlayerContainer');
            const workItems = document.querySelectorAll('.work-item');

            // 【重要修复】关闭模态框和移除播放器的函数
            function closeModal() {
                modal.classList.remove('show');
                // 移除所有子元素，停止视频播放
                while (videoContainer.firstChild) {
                    videoContainer.removeChild(videoContainer.firstChild);
                }
                document.body.style.overflow = 'auto'; 
            }

            // 1. 模态框播放逻辑
            workItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault(); 
                    
                    const videoSrc = this.getAttribute('data-video-src');
                    if (!videoSrc) return;

                    // 移动端：直接跳转到外部链接，避免在小屏幕内嵌播放体验差
                    if (window.innerWidth <= 1024) {
                        window.open(this.href, '_blank');
                        return; 
                    }


                    // 桌面端：在模态框内播放
                    const iframe = document.createElement('iframe');
                    iframe.setAttribute('src', videoSrc);
                    iframe.setAttribute('frameborder', '0');
                    iframe.setAttribute('allow', 'autoplay; fullscreen; picture-in-picture');
                    iframe.setAttribute('allowfullscreen', '');
                    iframe.classList.add('modal-video-player');
                    
                    while (videoContainer.firstChild) {
                        videoContainer.removeChild(videoContainer.firstChild);
                    }
                    videoContainer.appendChild(iframe);

                    modal.classList.add('show');
                    document.body.style.overflow = 'hidden';
                });
            });

            // 桌面端关闭事件绑定
            closeBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('show')) {
                    closeModal();
                }
            });


            // 2. 筛选功能 
            document.querySelectorAll('.tags-filter .work-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    const currentLang = document.body.getAttribute('data-current-lang');
                    const langPack = translations[currentLang];

                    // 1. 更新标签选中状态
                    document.querySelectorAll('.tags-filter .work-tag').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 2. 更新标签文本（重要：确保点击后文本也是新的语言）
                    document.querySelectorAll('.tags-filter .work-tag').forEach(t => {
                        const key = `filter_${t.getAttribute('data-filter')}`;
                        if (langPack[key]) {
                            t.textContent = langPack[key];
                        }
                    });


                    // 3. 执行筛选逻辑
                    const filter = this.getAttribute('data-filter');
                    const items = document.querySelectorAll('.portfolio-grid .work-item');

                    items.forEach(item => {
                        const tags = item.getAttribute('data-tags');
                        if (filter === 'all' || tags.includes(filter)) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            });
        });
    </script>
</body>
</html>