<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WXZ STUDIO - 视频作品</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header class="header">
        <div class="nav-content container">
            <div class="logo"><a href="index.html">WXZ STUDIO</a></div>
            <nav class="nav-menu">
                <ul>
                    <li><a href="index.html">首页</a></li>
                    <li><a href="video-portfolio.html" class="active">视频作品</a></li>
                    <li><a href="graphic-portfolio.html">平面设计作品</a></li>
                    <li><a href="contact.html">联系方式</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="main-content">
        <section class="portfolio-section">
            <div class="container">
                <h2>视频作品集</h2>
                <div class="tags-filter">
                    <span class="work-tag active" data-filter="all">全部</span>
                    <span class="work-tag" data-filter="event">商业活动</span>
                    <span class="work-tag" data-filter="product">产品拍摄</span>
                    <span class="work-tag" data-filter="brand">品牌宣传</span>
                </div>
                
                <div class="portfolio-grid video-portfolio-grid">
                    
                    <div class="work-item" data-tags="brand product" data-video-src="assets/videos/portfolio/video-01.mp4">
                        <div class="work-media">
                            <video muted loop preload="metadata" poster="assets/portfolio/video-cover-01.jpg">
                                <source src="assets/videos/portfolio/video-01.mp4" type="video/mp4">
                                您的浏览器不支持视频播放。
                            </video>
                        </div>
                        <div class="work-info">
                            <h3>2024年度混剪</h3>
                            <div class="work-tags"><span class="work-tag">品牌宣传</span></div>
                        </div>
                    </div>

                    <div class="work-item" data-tags="brand event" data-video-src="assets/videos/portfolio/video-02.mp4">
                        <div class="work-media">
                            <video muted loop preload="metadata" poster="assets/portfolio/video-cover-02.jpg">
                                <source src="assets/videos/portfolio/video-02.mp4" type="video/mp4">
                                您的浏览器不支持视频播放。
                            </video>
                        </div>
                        <div class="work-info">
                            <h3>首尔时装周</h3>
                            <div class="work-tags"><span class="work-tag">商业活动</span></div>
                        </div>
                    </div>

                    <div class="work-item" data-tags="event" data-video-src="assets/videos/portfolio/video-03.mp4">
                        <div class="work-media">
                            <video muted loop preload="metadata" poster="assets/portfolio/video-cover-03.jpg">
                                <source src="assets/videos/portfolio/video-03.mp4" type="video/mp4">
                                您的浏览器不支持视频播放。
                            </video>
                        </div>
                        <div class="work-info">
                            <h3>高端晚宴</h3>
                            <div class="work-tags"><span class="work-tag">商业活动</span></div>
                        </div>
                    </div>

                    <div class="work-item" data-tags="brand product" data-video-src="assets/videos/portfolio/video-04.mp4">
                        <div class="work-media">
                            <video muted loop preload="metadata" poster="assets/portfolio/video-cover-04.jpg">
                                <source src="assets/videos/portfolio/video-04.mp4" type="video/mp4">
                                您的浏览器不支持视频播放。
                            </video>
                        </div>
                        <div class="work-info">
                            <h3>新世界免税店 x 首尔月</h3>
                            <div class="work-tags"><span class="work-tag">产品拍摄</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 WXZ STUDIO. All Rights Reserved. </p>
        </div>
    </footer>

    <div id="videoModal" class="video-modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div id="videoPlayerContainer"></div>
        </div>
    </div>
    
    <nav class="mobile-nav">
        <div class="mobile-menu-icons">
            <a href="index.html">
                <img src="assets/images/icons/home.png" class="icon-default" alt="首页">
                <img src="assets/images/icons/home-active.png" class="icon-active" alt="首页 Active">
                <span>首页</span>
            </a>
            <a href="video-portfolio.html" class="active">
                <img src="assets/images/icons/video.png" class="icon-default" alt="视频作品">
                <img src="assets/images/icons/video-active.png" class="icon-active" alt="视频作品 Active">
                <span>视频作品</span>
            </a>
            <a href="graphic-portfolio.html">
                <img src="assets/images/icons/graphic.png" class="icon-default" alt="平面设计">
                <img src="assets/images/icons/graphic-active.png" class="icon-active" alt="平面设计 Active">
                <span>平面设计</span>
            </a>
            <a href="contact.html">
                <img src="assets/images/icons/contact.png" class="icon-default" alt="联系方式">
                <img src="assets/images/icons/contact-active.png" class="icon-active" alt="联系方式 Active">
                <span>联系方式</span>
            </a>
        </div>
    </nav>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const workItems = document.querySelectorAll('.work-item');
            const modal = document.getElementById('videoModal');
            const closeBtn = document.querySelector('.close-btn');
            const playerContainer = document.getElementById('videoPlayerContainer');

            // 1. 播放器逻辑
            workItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const videoSrc = this.getAttribute('data-video-src');
                    if (!videoSrc) return;

                    // 创建新的 video 元素
                    const videoElement = document.createElement('video');
                    videoElement.src = videoSrc;
                    videoElement.controls = true; // 显示播放控件
                    videoElement.autoplay = true; // 自动播放
                    videoElement.classList.add('modal-video-player');

                    // 清空容器并添加新的视频
                    playerContainer.innerHTML = '';
                    playerContainer.appendChild(videoElement);

                    // 手机端全屏播放逻辑 (通过 JS 调用 Fullscreen API)
                    if (window.innerWidth <= 1024) { 
                        // 在移动端，点击后尝试直接让视频元素全屏，效果取决于浏览器支持
                        if (videoElement.requestFullscreen) {
                            videoElement.requestFullscreen();
                        } else if (videoElement.webkitEnterFullscreen) { /* iOS Safari 专有 */
                             videoElement.webkitEnterFullscreen();
                        } else if (videoElement.webkitRequestFullscreen) { /* Chrome/Safari */
                            videoElement.webkitRequestFullscreen();
                        } else if (videoElement.msRequestFullscreen) { /* IE11 */
                            videoElement.msRequestFullscreen();
                        }
                    }

                    // 显示弹窗 (桌面端和不支持全屏的移动端)
                    modal.classList.add('show');
                });
            });

            // 关闭弹窗
            function closeModal() {
                modal.classList.remove('show');
                playerContainer.innerHTML = ''; // 停止播放并清空视频元素
            }

            // 点击关闭按钮
            closeBtn.addEventListener('click', closeModal);

            // 点击弹窗外部关闭
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

            // 键盘 ESC 键关闭
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('show')) {
                    closeModal();
                }
            });


            // 2. 筛选功能
            document.querySelectorAll('.tags-filter .work-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    document.querySelectorAll('.tags-filter .work-tag').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    const items = document.querySelectorAll('.portfolio-grid .work-item');

                    items.forEach(item => {
                        const tags = item.getAttribute('data-tags');
                        if (filter === 'all' || tags.includes(filter)) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            });
        });
    </script>
</body>
</html>